{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"CivicTrack Functional Specification Document","text":"<p>Author: Mahipal Singh Jhala  </p>"},{"location":"#1-project-overview","title":"1) Project Overview","text":""},{"location":"#problem-statement","title":"Problem Statement","text":"<p>Citizens face frequent civic issues such as potholes, garbage overflow, and broken streetlights. Existing reporting systems are inefficient and non-transparent, causing delays and loss of accountability.</p>"},{"location":"#objective","title":"Objective","text":"<p>CivicTrack provides a digital, transparent platform that connects citizens, authorities, and administrators for efficient issue reporting, tracking, and resolution.</p>"},{"location":"#scope","title":"Scope","text":"<ul> <li>Role-based dashboards for Citizen, Authority, and Admin.  </li> <li>Issue reporting, tracking, and moderation workflows.  </li> <li>Secure access through authentication and SSL encryption.  </li> <li>Image upload and flagging features.</li> </ul>"},{"location":"#2-proposed-solution","title":"2) Proposed Solution","text":"<p>CivicTrack enables efficient coordination between citizens and civic authorities.</p> <ol> <li>Citizens report civic issues with photo, location, and description.  </li> <li>The system assigns the issue to the respective authority department.  </li> <li>Authorities update progress and resolution status.  </li> <li>Admins oversee all activities and moderate flagged issues.</li> </ol>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Simple and fast issue reporting.  </li> <li>Real-time issue tracking and updates.  </li> <li>Role-based access control.  </li> <li>Secure data flow over HTTPS.</li> </ul>"},{"location":"#3-user-roles","title":"3) User Roles","text":"Role Description Citizen Registers, reports issues, flags duplicates, views updates. Authority Handles assigned issues, updates progress, manages resolutions. Admin Manages users, authorities, categories, and moderation."},{"location":"#4-functional-components","title":"4) Functional Components","text":""},{"location":"#i-authentication-authorization","title":"i. Authentication &amp; Authorization","text":"<ul> <li>Provides secure user login and role-based access.  </li> <li>Uses cookies for session handling to prevent token exposure.  </li> <li>Three main roles: Citizen, Authority, and Admin.  </li> <li>Passwords encrypted before storage.  </li> <li>Includes password change and logout options.  </li> <li>Ensures that users can access only permitted modules and data.</li> </ul>"},{"location":"#ii-issue-management","title":"ii. Issue Management","text":"<ul> <li>Citizens can create, update, and view their own issues.  </li> <li>Authorities update the issue status to In Progress or Resolved.  </li> <li>Admins have complete visibility over all issues.  </li> <li>Issues contain title, description, category, location, image, and timestamps.  </li> <li>Data managed through <code>user_issue</code>, <code>issue_images</code>, and related tables.</li> </ul>"},{"location":"#iii-flagging-moderation","title":"iii. Flagging &amp; Moderation","text":"<ul> <li>Citizens can flag spam or duplicate issues.  </li> <li>Flag data stored in <code>user_issue_flag</code>.  </li> <li>Issues automatically hidden after multiple flags.  </li> <li>Admin reviews flagged items and decides whether to hide or restore them.</li> </ul>"},{"location":"#iv-category-department-management","title":"iv. Category &amp; Department Management","text":"<ul> <li>Admins can create and edit categories such as Roads, Water, or Sanitation.  </li> <li>Each category is linked to a department via <code>authority_issue</code>.  </li> <li>Authority users are associated with specific departments using <code>authority_user</code>.</li> </ul>"},{"location":"#5-tech-stack","title":"5) Tech Stack","text":""},{"location":"#frontend","title":"Frontend","text":"<ul> <li>React.js (Vite) \u2013 Component-based architecture for fast UI rendering.  </li> <li>Tailwind CSS \u2013 Modern, responsive design.  </li> <li>PWA Support \u2013 Installable and mobile-friendly.</li> </ul>"},{"location":"#backend","title":"Backend","text":"<ul> <li>Node.js + Express.js \u2013 RESTful API layer and routing.  </li> <li>Sequelize ORM \u2013 PostgreSQL integration.  </li> <li>Multer + AWS SDK \u2013 Image uploads to AWS S3.  </li> <li>Helmet, CORS, Express Validator \u2013 Security and input validation.</li> </ul>"},{"location":"#database","title":"Database","text":"<ul> <li>PostgreSQL (AWS RDS) \u2013 Secure and scalable relational data storage.</li> </ul>"},{"location":"#cloud-hosting","title":"Cloud &amp; Hosting","text":"<ul> <li>AWS EC2 \u2013 Application hosting (frontend + backend).  </li> <li>AWS RDS \u2013 Managed PostgreSQL database.  </li> <li>AWS S3 \u2013 Image storage via pre-signed URLs.  </li> <li>AWS Certificate Manager (ACM) \u2013 SSL/TLS certificates for HTTPS.  </li> <li>Route 53 \u2013 Domain and DNS management.</li> </ul>"},{"location":"#6-system-flow-overview","title":"6) System Flow Overview","text":""},{"location":"#example","title":"Example","text":"<p>A citizen reports a garbage issue \u2192    System assigns it to Sanitation Authority \u2192    Authority marks it In Progress \u2192 then Resolved \u2192    Citizen receives updated status.</p>"},{"location":"#7-non-functional-considerations","title":"7) Non-Functional Considerations","text":""},{"location":"#scalability","title":"Scalability","text":"<ul> <li>Stateless API supports horizontal scaling on EC2.  </li> <li>Database connection pooling for high concurrency.</li> </ul>"},{"location":"#security","title":"Security","text":"<ul> <li>HTTPS enforced via AWS Certificate Manager.  </li> <li>Password encryption using bcrypt.  </li> <li>Encrypted communication between EC2 and RDS.</li> </ul>"},{"location":"#performance","title":"Performance","text":"<ul> <li>Indexed database queries for fast filtering.  </li> <li>Pre-signed URLs minimize API load for file transfers.</li> </ul>"},{"location":"#usability","title":"Usability","text":"<ul> <li>Responsive and intuitive UI for all roles.  </li> <li>Consistent navigation and clear dashboards.</li> </ul>"},{"location":"#8-security-overview","title":"8) Security Overview","text":"<ul> <li>All communication over HTTPS (SSL from AWS ACM).  </li> <li>Cookies used for session authentication.  </li> <li>Passwords hashed and stored securely.  </li> <li>RDS connections encrypted (SSL mode).  </li> <li>Security groups restrict port access:  </li> <li><code>443</code> \u2192 HTTPS  </li> <li><code>80</code> \u2192 Redirect to HTTPS  </li> <li><code>5432</code> \u2192 Private DB access only</li> </ul>"},{"location":"#9-future-vision","title":"9) Future Vision","text":"<ul> <li>Push notifications for live updates.  </li> <li>Analytics dashboard for administrators.  </li> <li>OAuth/SSO login integration.  </li> <li>Refresh tokens for persistent sessions.  </li> <li>Two-Factor Authentication (2FA) for admins.</li> <li>Geolocation filtering of issue.</li> </ul>"},{"location":"usecase/","title":"CivicTrack Use Case Document","text":""},{"location":"usecase/#1-overview","title":"1) Overview","text":"<p>This document describes the primary system interactions (use cases) of the CivicTrack application. Each use case defines the participating actors, system behavior, and expected outcomes.</p>"},{"location":"usecase/#2-actors","title":"2) Actors","text":"Actor Description Citizen Registers, reports issues, flags duplicates, changes password, and views issue status. Authority Updates issue status and monitors issues assigned to their department. Admin Manages users, categories, departments, and reviews flagged issues. System Handles authentication, file storage (S3), and SSL-based secure communication."},{"location":"usecase/#3-use-case-diagram","title":"3) Use Case Diagram","text":""},{"location":"usecase/#4-use-cases","title":"4) Use Cases","text":""},{"location":"usecase/#uc-01-register-user","title":"UC-01: Register User","text":"<p>Actor: Citizen Goal: To create a new user account. Precondition: User provides valid registration details (name, email, password). Main Flow:.   1. Citizen navigates to the registration form.   2. Enters personal details and submits.   3. System validates inputs and stores encrypted password in the database.   4. Confirmation message displayed upon successful registration. Postcondition: User account created with role = Citizen.</p>"},{"location":"usecase/#uc-02-login","title":"UC-02: Login","text":"<p>Actor: All user roles (Citizen, Authority, Admin) Goal: To authenticate and start a secure session. Precondition: User already registered. Main Flow:.    1. User enters email and password.   2. System verifies credentials from <code>users</code> table.   3. If valid, system generates a JWT and stores it in an HTTP-only cookie.   4. User redirected to their respective dashboard. Postcondition: User session established via secure cookie.</p>"},{"location":"usecase/#uc-03-report-issue","title":"UC-03: Report Issue","text":"<p>Actor: Citizen Goal: To report a civic issue with details and image. Precondition: User must be logged in. Main Flow:.   1. User selects issue category and location.   2. Uploads image (optional) and adds a description.   3. System validates input and uploads image to AWS S3.   4. Issue is saved in <code>user_issue</code> table with status = Reported.   5. Assigned authority notified through dashboard. Postcondition: Issue created and visible to related authority and admin.</p>"},{"location":"usecase/#uc-04-update-issue-status","title":"UC-04: Update Issue Status","text":"<p>Actor: Authority Goal: To mark progress or resolution of an issue. Precondition: Issue is assigned to the authority\u2019s department. Main Flow:.   1. Authority views assigned issues.   2. Updates status (e.g., In Progress or Resolved).   3. System records update in <code>logs</code> table.   4. Citizen and admin see the updated status. Postcondition: Issue status updated and logged with timestamp.</p>"},{"location":"usecase/#uc-05-flag-issue","title":"UC-05: Flag Issue","text":"<p>Actor: Citizen Goal: To flag inappropriate or duplicate issues. Precondition: Citizen must be logged in. Main Flow:.     1. User views an issue they believe is spam or duplicate.   2. Clicks \u201cFlag\u201d and selects reason.   3. System saves entry in <code>user_issue_flag</code> table.   4. If an issue exceeds the flag threshold, it is auto-hidden until admin review. Postcondition: Flag recorded, issue visibility updated if threshold reached.</p>"},{"location":"usecase/#uc-06-review-flagged-issues","title":"UC-06: Review Flagged Issues","text":"<p>Actor: Admin Goal: To moderate flagged issues. Precondition: At least one issue flagged by citizens. Main Flow:.    1. Admin opens flagged issues list.   2. Reviews details and decides whether to keep hidden or restore.   3. System updates issue\u2019s visibility status in database. Postcondition: Issue visibility updated based on admin decision.</p>"},{"location":"usecase/#uc-07-manage-users","title":"UC-07: Manage Users","text":"<p>Actor: Admin Goal: To manage user accounts and roles. Precondition: Admin logged in with required privileges. Main Flow:.      1. Admin views user list.   2. Can assign, modify, or revoke roles.   3. System updates user-role mapping in <code>user_role</code> table. Postcondition: User permissions updated in the system.</p>"},{"location":"usecase/#uc-08-change-password","title":"UC-08: Change Password","text":"<p>Actor: All users (Citizen, Authority, Admin) Goal: To securely change the current password. Precondition: User must be logged in. Main Flow:.    1. User opens \"Change Password\" form.   2. Enters current password and new password.   3. System validates current password and encrypts the new one using bcrypt.   4. Updates <code>users</code> table and clears existing session cookie.   5. User must log in again using the new password. Postcondition: Password changed and user re-authenticated.</p>"},{"location":"usecase/#5-exception-scenarios","title":"5) Exception Scenarios","text":"Use Case Exception System Response Register / Login Invalid input Display error message Report Issue Missing data or invalid image Prompt user to correct input Update Status Unauthorized user Return <code>403 Forbidden</code> Change Password Wrong current password Return error \u201cInvalid credentials\u201d Flag Issue Duplicate flag by same user Reject and notify \u201cAlready flagged\u201d"},{"location":"usecase/#6-postconditions-summary","title":"6) Postconditions Summary","text":"Use Case Result UC-01 User account created UC-02 Session started (cookie issued) UC-03 Issue created in DB UC-04 Issue status updated UC-05 Flag recorded UC-06 Issue visibility changed UC-07 User roles updated UC-08 Password changed and session cleared"},{"location":"usecase/#7-assumptions","title":"7) Assumptions","text":"<ul> <li>All communications are secured with HTTPS (SSL from AWS ACM).  </li> <li>Passwords are hashed before storage.  </li> <li>Role-based access ensures no unauthorized data access.  </li> </ul>"},{"location":"technical-doc/arch/","title":"Architecture","text":""},{"location":"technical-doc/auth/","title":"Authentication &amp; Authorization Module - CivicTrack","text":""},{"location":"technical-doc/auth/#1-authentication-authorization-sequence-diagram","title":"1. Authentication &amp; Authorization Sequence Diagram","text":""},{"location":"technical-doc/auth/#_1","title":"Authentication/Authorization","text":""},{"location":"technical-doc/auth/#2-authentication-flow","title":"2. Authentication Flow","text":""},{"location":"technical-doc/auth/#step-by-step-explanation","title":"Step-by-Step Explanation","text":"<ol> <li>User Login Request</li> <li>The user enters their email and password in the frontend (React).</li> <li> <p>This data is sent to the backend API via a secure HTTPS POST request.</p> </li> <li> <p>Password Verification</p> </li> <li>The backend fetches the user record from PostgreSQL.</li> <li> <p>The stored password hash is compared using bcrypt.</p> </li> <li> <p>JWT Creation</p> </li> <li>If valid, the backend generates a JWT containing:<ul> <li><code>user_id</code></li> <li><code>role_id</code> (citizen / authority / admin)</li> <li>Token expiry (e.g., 24 hours)</li> </ul> </li> <li> <p>The JWT is signed using a secret key stored in <code>.env</code>.</p> </li> <li> <p>Token Storage (Secure Cookie)</p> </li> <li> <p>Instead of sending the token in headers, it is stored in a secure HTTP-only cookie:</p> <ul> <li><code>Secure: true</code> \u2192 sent only over HTTPS  </li> <li><code>SameSite: strict</code> \u2192 prevents cross-site request forgery  </li> <li><code>HttpOnly: true</code> \u2192 cannot be read by JavaScript  </li> </ul> </li> <li> <p>Login Success</p> </li> <li>The backend sends a success message (<code>200 OK</code>) and sets the cookie in the browser.</li> <li>The frontend stores no sensitive data \u2014 only relies on cookies for authentication.</li> </ol>"},{"location":"technical-doc/auth/#3-authorization-flow","title":"3. Authorization Flow","text":"<p>After login, every API request must include the cookie automatically.</p> <ol> <li>Frontend Request</li> <li> <p>When a user visits a protected page (e.g., <code>/api/issues</code>), the browser sends the cookie.</p> </li> <li> <p>Backend Middleware (Auth Check)</p> </li> <li>The backend verifies the JWT signature and expiry.</li> <li> <p>If valid, it extracts the user\u2019s <code>role</code> and attaches it to the request object.</p> </li> <li> <p>Role-Based Access</p> </li> <li> <p>The backend checks user permissions:</p> <ul> <li>Citizen \u2192 can report/view own issues  </li> <li>Authority \u2192 can view and update issues of assigned categories  </li> <li>Admin \u2192 can manage users, categories, and flags  </li> </ul> </li> <li> <p>Access Decision</p> </li> <li>If permitted, the backend responds with <code>200 OK</code>.</li> <li>Otherwise, it returns <code>403 Forbidden</code>.</li> </ol>"},{"location":"technical-doc/auth/#4-logout-process","title":"4. Logout Process","text":"<ul> <li>When the user clicks Logout, the backend clears the cookie:   <code>js   res.clearCookie(\"token\", {     httpOnly: true,     secure: true,     sameSite: \"strict\",   });</code></li> <li>This invalidates the session immediately.</li> </ul>"},{"location":"technical-doc/dfd/","title":"CivicTrack - Data Flow Diagrams (DFD)","text":""},{"location":"technical-doc/dfd/#level-0-dfd-context-diagram","title":"Level 0 DFD \u2014 Context Diagram","text":"<p>The Level 0 DFD provides a high-level view of the system and its interactions with external entities. It represents the entire CivicTrack application as a single process and shows how data moves between the system and its users.</p> <p></p>"},{"location":"technical-doc/dfd/#explanation","title":"Explanation","text":"Entity Description Citizen Reports issues and views status updates. Authority Updates issue progress based on category. Admin Manages system users, categories, and moderation. Database Stores user details, issue reports, and logs. <p>Data Flow Summary: - Citizens submit reports \u2192 stored in the database. - Authorities update statuses \u2192 updates reflected for citizens. - Admin oversees all operations \u2192 manages flags and user permissions.  </p>"},{"location":"technical-doc/dfd/#level-1-dfd","title":"Level 1 DFD","text":"<p>This diagram expands the CivicTrack system into its main functional modules and illustrates internal data flow between entities, processes, and the database.</p>"},{"location":"technical-doc/dfd/#_1","title":"Data Flow Diagrams","text":""},{"location":"technical-doc/dfd/#explanation_1","title":"Explanation","text":"Process ID Process Name Description 1.0 Authentication &amp; Role Management Handles login, signup, and role-based access control. 2.0 Issue Reporting Citizens submit civic issues with photo, description, and location. 3.0 Issue Update &amp; Logs Authorities update issue progress and generate status logs. 4.0 Flagging &amp; Moderation Users flag spam/duplicates and admins review them. 5.0 Category Management Admin manages categories and assigns authorities. <p>Data Flows: - User actions trigger process modules. - Each process reads/writes data in PostgreSQL or S3. - Responses are returned based on user role and permissions.  </p>"},{"location":"technical-doc/endpoint/","title":"CivicTrack API Documentation","text":""},{"location":"technical-doc/endpoint/#1-overview","title":"1. Overview","text":"<p>This API documentation defines the routes for the CivicTrack System, which manages user authentication, issue reporting, moderation, and category assignments. All endpoints are prefixed with <code>/api/</code> and secured by JWT authentication through HTTP-only cookies.</p>"},{"location":"technical-doc/endpoint/#2-authentication-authorization-routes","title":"2. Authentication &amp; Authorization Routes","text":"Endpoint Method Access Description <code>/api/auth/signup</code> POST Public Allows a Citizen to register by providing name, email, and password. <code>/api/auth/login</code> POST Public Authenticates a user (Citizen, Authority, or Admin) and sets a secure cookie. <code>/api/auth/logout</code> POST Authenticated Clears authentication cookie and ends the session. <code>/api/auth/me</code> GET Authenticated Returns logged-in user details and assigned role. <p>Notes: - Authentication uses cookies instead of headers. - Passwords are hashed using bcrypt. - All routes are protected using middleware that verifies user roles.  </p>"},{"location":"technical-doc/endpoint/#3-user-management-admin-only","title":"3. User Management (Admin Only)","text":"Endpoint Method Access Description <code>/api/users</code> GET Admin Lists all users (Citizens, Authorities, Admins). <code>/api/users/:id</code> GET Admin Retrieves user details by ID. <code>/api/users</code> POST Admin Creates a new Authority or Admin account. <code>/api/users/:id</code> PUT Admin Updates user details (name, role, status). <code>/api/users/:id</code> DELETE Admin Permanently deletes a user record. <p>Notes: - Authorities are created by Admins only. - Admins can modify roles and deactivate users if needed.  </p>"},{"location":"technical-doc/endpoint/#4-issue-management","title":"4. Issue Management","text":"Endpoint Method Access Description <code>/api/issues</code> POST Citizen Allows a citizen to report a civic issue with title, description, location, and photo. <code>/api/issues</code> GET Citizen, Authority, Admin Fetches all issues. Supports optional filters via query params: <code>?status=resolved&amp;category=water</code>. <code>/api/issues/:id</code> GET Citizen, Authority, Admin Retrieves details of a specific issue. <code>/api/issues/:id/status</code> PUT Authority Updates issue status (e.g., Reported \u2192 In Progress \u2192 Resolved). Automatically creates a log entry. <code>/api/issues/:id/logs</code> GET Authority, Admin Returns all status change logs for the given issue. <code>/api/issues/:id</code> DELETE Admin Removes an issue from the system permanently. <p>Notes: - Each issue is automatically linked to the reporter (Citizen). - Logs are automatically generated whenever status changes. - Images are uploaded and stored in AWS S3. - Status flow: <code>Reported \u2192 In Progress \u2192 Resolved</code>.  </p>"},{"location":"technical-doc/endpoint/#5-flagging-moderation","title":"5. Flagging &amp; Moderation","text":"Endpoint Method Access Description <code>/api/flags</code> POST Citizen Flags an issue as inappropriate or duplicate. <code>/api/flags</code> GET Admin Retrieves a list of flagged issues for review. <code>/api/flags/:issueId/review</code> PUT Admin Admin reviews and updates issue visibility (hide/unhide). <p>Notes: - A flagged issue becomes hidden after a threshold number of flags. - Admin can restore or permanently hide flagged content.  </p>"},{"location":"technical-doc/endpoint/#6-category-management","title":"6. Category Management","text":"Endpoint Method Access Description <code>/api/categories</code> GET Public Returns all available issue categories (e.g., Roads, Water, Sanitation). <code>/api/categories</code> POST Admin Creates a new issue category. <code>/api/categories/:id</code> PUT Admin Updates category name or description. <code>/api/categories/:id</code> DELETE Admin Deletes a category permanently. <code>/api/categories/assign</code> PUT Authority Allows an authority to choose or change which categories they handle. <p>Notes: - Authorities can self-assign categories through <code>/assign</code>. - Each category can have multiple authorities.  </p>"},{"location":"technical-doc/endpoint/#7-issue-logs-auto-generated","title":"7. Issue Logs (Auto-Generated)","text":"Endpoint Method Access Description <code>/api/issues/:id/logs</code> GET Authority, Admin Fetches the complete log history for a specific issue. <p>Log Behavior: - Logs are created automatically only for user issues. - Each log entry includes:   - <code>issue_id</code>   - <code>old_status \u2192 new_status</code>   - <code>updated_by</code> (Authority ID)   - <code>timestamp</code> - Logs cannot be edited or deleted manually.  </p> <p>Examples of Logged Events: - Status changed from Reported to In Progress - Status changed from In Progress to Resolved </p>"},{"location":"technical-doc/endpoint/#8-common-query-parameters","title":"8. Common Query Parameters","text":"Parameter Type Used In Description <code>status</code> String <code>/api/issues</code> Filter issues by status (reported/in_progress/resolved). <code>category</code> String <code>/api/issues</code> Filter issues by category name. <code>page</code> Number <code>/api/issues</code> Paginate issue results. <code>limit</code> Number <code>/api/issues</code> Control number of issues returned per page."},{"location":"technical-doc/endpoint/#9-status-codes-summary","title":"9. Status Codes Summary","text":"Code Meaning When Used 200 OK Request successful Successful GET/PUT/POST/DELETE actions 201 Created New record created On signup or issue creation 400 Bad Request Validation or missing fields Invalid input from user 401 Unauthorized User not logged in Missing/invalid cookie 403 Forbidden Access denied Role does not have permission 404 Not Found Resource missing Record does not exist 500 Server Error Internal system error Unexpected backend failure"},{"location":"technical-doc/endpoint/#10-summary","title":"10. Summary","text":"Module Purpose Auth Handles secure login/logout and role-based access Users Admin-only user management and role assignment Issues Reporting and updating civic issues with geolocation and photo support Flags Allows users to report spam or duplicate issues Categories Defines and manages issue types; authorities choose categories Issue Logs Tracks all issue status changes automatically"},{"location":"technical-doc/schema/","title":"CivicTrack Database Schema Design Document","text":""},{"location":"technical-doc/schema/#2-entity-relationship-diagram-erd","title":"2. Entity Relationship Diagram (ERD)","text":"<p>The ERD represents relationships between users, roles, issues, authorities, flags, and logs. It forms the backbone of the data model for CivicTrack.</p>"},{"location":"technical-doc/schema/#3-core-tables-and-relationships","title":"3. Core Tables and Relationships","text":""},{"location":"technical-doc/schema/#31-users","title":"3.1 users","text":"<p>Stores all registered platform users.</p> Column Type Constraints Description <code>id</code> BIGINT PK Unique user ID <code>name</code> VARCHAR(100) NOT NULL User\u2019s full name <code>email</code> VARCHAR(150) UNIQUE, NOT NULL User\u2019s email for login <code>password_hash</code> VARCHAR(255) NOT NULL Encrypted password (bcrypt) <code>created_at</code> TIMESTAMPTZ DEFAULT now() Creation timestamp <code>updated_at</code> TIMESTAMPTZ DEFAULT now() Last modification <code>deleted_at</code> TIMESTAMPTZ NULLABLE Soft delete marker"},{"location":"technical-doc/schema/#32-roles","title":"3.2 roles","text":"<p>Defines all available roles within the system.</p> Column Type Constraints Description <code>id</code> BIGINT PK Unique role ID <code>name</code> VARCHAR(50) UNIQUE, NOT NULL Role name (citizen, authority, admin) <code>description</code> TEXT NULL Description of the role <code>is_active</code> BOOLEAN DEFAULT TRUE Role availability <code>created_at</code> TIMESTAMPTZ DEFAULT now() Creation timestamp <code>updated_at</code> TIMESTAMPTZ DEFAULT now() Last update timestamp"},{"location":"technical-doc/schema/#33-user_role","title":"3.3 user_role","text":"<p>Mapping table linking users with their assigned roles.</p> Column Type Constraints <code>id</code> BIGINT PK <code>user_id</code> BIGINT FK \u2192 <code>users.id</code>, NOT NULL <code>role_id</code> BIGINT FK \u2192 <code>roles.id</code>, NOT NULL <code>created_at</code> TIMESTAMPTZ DEFAULT now() <code>updated_at</code> TIMESTAMPTZ DEFAULT now()"},{"location":"technical-doc/schema/#34-authorities","title":"3.4 authorities","text":"<p>Stores each civic department or administrative authority.</p> Column Type Constraints Description <code>id</code> BIGINT PK Authority ID <code>name</code> VARCHAR(150) NOT NULL Authority or department name <code>city</code> VARCHAR(100) NOT NULL City or jurisdiction <code>region</code> VARCHAR(100) NOT NULL Area of operation <code>department_id</code> BIGINT FK \u2192 <code>departments.id</code> Linked department <code>address</code> TEXT NULL Physical address <code>coverage_area</code> GEOGRAPHY(Polygon) NULL Geo-boundary <code>created_at</code> TIMESTAMPTZ DEFAULT now() Created date <code>updated_at</code> TIMESTAMPTZ DEFAULT now() Updated date"},{"location":"technical-doc/schema/#35-authority_user","title":"3.5 authority_user","text":"<p>Links specific users to their respective authorities.</p> Column Type Constraints <code>id</code> BIGINT PK <code>authority_id</code> BIGINT FK \u2192 <code>authorities.id</code>, NOT NULL <code>user_id</code> BIGINT FK \u2192 <code>users.id</code>, UNIQUE, NOT NULL <code>created_at</code> TIMESTAMPTZ DEFAULT now() <code>updated_at</code> TIMESTAMPTZ DEFAULT now()"},{"location":"technical-doc/schema/#36-issues","title":"3.6 issues","text":"<p>Stores predefined issue categories (e.g., Roads, Water, Lighting).</p> Column Type Constraints <code>id</code> BIGINT PK <code>name</code> VARCHAR(100) UNIQUE, NOT NULL <code>slug</code> VARCHAR(100) UNIQUE, NOT NULL <code>description</code> TEXT NULL"},{"location":"technical-doc/schema/#37-user_issue","title":"3.7 user_issue","text":"<p>Stores user-submitted civic issues.</p> Column Type Constraints Description <code>id</code> BIGINT PK Unique issue ID. <code>title</code> VARCHAR(255) NOT NULL Title of the reported issue. <code>description</code> TEXT NOT NULL Detailed description of the issue. <code>issue_id</code> BIGINT FK \u2192 issues.id, NOT NULL References the type/category of the issue. <code>reporter_id</code> BIGINT FK \u2192 users.id, NOT NULL ID of the user who reported the issue. <code>authority_id</code> BIGINT FK \u2192 authorities.id ID of the authority assigned to handle this issue. <code>latitude</code> DOUBLE PRECISION NULL Latitude coordinate of the issue\u2019s location. <code>longitude</code> DOUBLE PRECISION NULL Longitude coordinate of the issue\u2019s location. <code>region</code> VARCHAR(100) NULL Optional city or area name. <code>status</code> ENUM('reported', 'in_progress', 'resolved') DEFAULT <code>'reported'</code> Represents the issue\u2019s lifecycle stage. <code>is_hidden</code> BOOLEAN DEFAULT FALSE Marks whether the issue is hidden due to admin moderation or flags. <code>created_at</code> TIMESTAMPTZ DEFAULT <code>now()</code> Timestamp of when the issue was created. <code>updated_at</code> TIMESTAMPTZ DEFAULT <code>now()</code> Timestamp of the most recent update. <code>deleted_at</code> TIMESTAMPTZ NULLABLE Soft deletion timestamp for archival or recovery."},{"location":"technical-doc/schema/#38-issue_images","title":"3.8 issue_images","text":"<p>Stores image URLs related to user-reported issues.</p> Column Type Constraints <code>id</code> BIGINT PK <code>report_id</code> BIGINT FK \u2192 <code>user_issue.id</code>, NOT NULL <code>url</code> TEXT NOT NULL <code>created_at</code> TIMESTAMPTZ DEFAULT now()"},{"location":"technical-doc/schema/#39-flags","title":"3.9 flags","text":"<p>Defines flag categories for moderation (e.g., spam, duplicate).</p> Column Type Constraints <code>id</code> BIGINT PK <code>name</code> VARCHAR(100) UNIQUE, NOT NULL <code>description</code> TEXT NULL"},{"location":"technical-doc/schema/#310-user_issue_flag","title":"3.10 user_issue_flag","text":"<p>Tracks flags applied by users to reported issues.</p> Column Type Constraints <code>id</code> BIGINT PK <code>report_id</code> BIGINT FK \u2192 <code>user_issue.id</code>, NOT NULL <code>user_id</code> BIGINT FK \u2192 <code>users.id</code>, NOT NULL <code>flag_id</code> BIGINT FK \u2192 <code>flags.id</code>, NOT NULL <code>created_at</code> TIMESTAMPTZ DEFAULT now() <code>updated_at</code> TIMESTAMPTZ DEFAULT now()"},{"location":"technical-doc/schema/#311-logs","title":"3.11 logs","text":"<p>Stores historical changes for issue status updates and comments.</p> Column Type Constraints <code>id</code> BIGINT PK <code>issue_id</code> BIGINT FK \u2192 <code>user_issue.id</code>, NOT NULL <code>updated_by</code> BIGINT FK \u2192 <code>users.id</code>, NOT NULL <code>from_status</code> VARCHAR(30) NULL <code>to_status</code> VARCHAR(30) NULL <code>comment</code> TEXT NULL <code>created_at</code> TIMESTAMPTZ DEFAULT now() <code>updated_at</code> TIMESTAMPTZ DEFAULT now()"},{"location":"technical-doc/schema/#4-enums-and-status-definitions","title":"4. ENUMs and Status Definitions","text":"Enum Type Values Description <code>issue_status</code> <code>('reported', 'in_progress', 'resolved')</code> Defines the issue lifecycle"},{"location":"technical-doc/schema/#example-sql","title":"Example SQL","text":"<pre><code>CREATE TYPE issue_status AS ENUM ('reported', 'in_progress', 'resolved');\n</code></pre>"},{"location":"technical-doc/schema/#6-index-summary","title":"6. Index Summary","text":"Table Index Name Index Type Columns Purpose / Use Case SQL Example <code>users</code> <code>idx_users_email_unique</code> UNIQUE (BTREE) <code>email</code> Prevent duplicate user accounts and speed up authentication <code>CREATE UNIQUE INDEX idx_users_email_unique ON users(email);</code> <code>user_issue</code> <code>idx_user_issue_status</code> BTREE <code>status</code> Quickly filter issues by status (<code>reported</code>, <code>in_progress</code>, <code>resolved</code>) <code>CREATE INDEX idx_user_issue_status ON user_issue(status);</code> <code>user_issue</code> <code>idx_user_issue_authority_status</code> COMPOSITE (BTREE) <code>authority_id, status</code> Speed up authority dashboards when filtering issues by both status and assigned authority <code>CREATE INDEX idx_user_issue_authority_status ON user_issue(authority_id, status);</code> <code>user_issue</code> <code>idx_user_issue_lat_lon</code> COMPOSITE (BTREE) <code>latitude, longitude</code> Optimize location-based search using bounding box + Haversine queries <code>CREATE INDEX idx_user_issue_lat_lon ON user_issue(latitude, longitude);</code> <code>roles</code> <code>idx_roles_name_unique</code> UNIQUE (BTREE) <code>name</code> Ensure no duplicate roles exist in the system <code>CREATE UNIQUE INDEX idx_roles_name_unique ON roles(name);</code> <code>issues</code> <code>idx_issues_slug_unique</code> UNIQUE (BTREE) <code>slug</code> Ensure issue category slugs are unique and URL-safe <code>CREATE UNIQUE INDEX idx_issues_slug_unique ON issues(slug);</code> <code>user_role</code> <code>idx_user_role_unique</code> UNIQUE COMPOSITE (BTREE) <code>user_id, role_id</code> Prevent assigning the same role to a user more than once <code>CREATE UNIQUE INDEX idx_user_role_unique ON user_role(user_id, role_id);</code> <code>authority_user</code> <code>idx_authority_user_unique</code> UNIQUE COMPOSITE (BTREE) <code>authority_id, user_id</code> Enforce one-to-one mapping between authority and user account <code>CREATE UNIQUE INDEX idx_authority_user_unique ON authority_user(authority_id, user_id);</code> <code>logs</code> <code>idx_logs_issue_id</code> BTREE <code>issue_id</code> Fetch issue logs quickly for timelines and history views <code>CREATE INDEX idx_logs_issue_id ON logs(issue_id);</code> <code>logs</code> <code>idx_logs_user_activity</code> COMPOSITE (BTREE) <code>updated_by, created_at</code> Track user actions chronologically for analytical or admin audit purposes <code>CREATE INDEX idx_logs_user_activity ON logs(updated_by, created_at);</code>"},{"location":"technical-doc/tech-stack/","title":"CivicTrack - Tech Stack Documentation (Final with AWS RDS)","text":""},{"location":"technical-doc/tech-stack/#1-system-architecture-overview","title":"1. System Architecture Overview","text":"Layer Technology / Tool Purpose Frontend React.js (Vite) + Tailwind CSS + Axios Provides an interactive user interface for all roles (Citizen, Authority, Admin). Backend Node.js + Express.js + Sequelize ORM Handles REST APIs, authentication, and communicates with PostgreSQL (via RDS). Database AWS RDS (PostgreSQL) Managed relational database for users, issues, logs, and categories. Storage AWS S3 Stores uploaded issue images securely. Deployment Docker + Docker Compose (on AWS EC2) Orchestrates containerized backend and frontend. Security JWT (HTTP-only Cookies), bcrypt, Helmet, SSL/TLS Ensures authentication, encryption, and secure communication. SSL/TLS AWS Certificate Manager Enables HTTPS for secure frontend and backend access."},{"location":"technical-doc/tech-stack/#2-frontend-stack","title":"2. Frontend Stack","text":"Tool / Library Purpose React.js (Vite) Lightweight, modular UI for dynamic page rendering. Tailwind CSS Provides utility-first responsive styling. Axios Handles API calls using secure cookies for auth. React Router DOM Manages routing between role-based dashboards. PWA Support Allows users to install the app on mobile as a web application. <p>Reason for Choice: React and Vite provide fast performance, modular structure, and easy scalability. Tailwind ensures consistent, responsive design across devices.</p>"},{"location":"technical-doc/tech-stack/#3-backend-stack","title":"3. Backend Stack","text":"Tool / Library Purpose Node.js + Express.js Provides the REST API layer for authentication, issue management, and admin operations. Sequelize ORM Simplifies PostgreSQL interactions using model-based queries. JWT (HTTP-only Cookie) Manages secure authentication sessions. Multer + AWS SDK Handles image uploads directly to S3. bcrypt Secures user passwords through hashing. Helmet + CORS + Express Validator Adds security, sanitization, and validation layers. <p>Reason for Choice: Express and Sequelize provide flexibility and maintainable API structure. Using JWT with HTTP-only cookies prevents XSS token leaks.</p>"},{"location":"technical-doc/tech-stack/#4-database-layer-aws-rds-postgresql","title":"4. Database Layer \u2014 AWS RDS (PostgreSQL)","text":"Component Technology Purpose Database Engine AWS RDS (PostgreSQL) Managed relational database service for high reliability. Indexes BTREE, UNIQUE, COMPOSITE Optimizes relational queries. Backup AWS Automated Backups RDS-managed daily snapshot and recovery points. <p>Reason for Choice: Using AWS RDS offloads database management, backups, and scaling. It provides reliability, encryption, and monitoring without requiring local containers.</p>"},{"location":"technical-doc/tech-stack/#5-cloud-infrastructure-aws","title":"5. Cloud &amp; Infrastructure (AWS)","text":"Service Purpose AWS EC2 Hosts the Dockerized backend and frontend containers. AWS RDS (PostgreSQL) Stores all structured application data. AWS S3 Manages image uploads. AWS Certificate Manager (ACM) Issues SSL certificates for HTTPS encryption. AWS Route53 DNS. <p>RDS Networking Setup: - EC2 and RDS are deployed within the same VPC for secure, private communication. - RDS Security Group allows inbound connections only from the EC2 instance\u2019s private IP. - Database credentials are stored securely in the <code>.env</code> file and loaded at runtime.  </p>"},{"location":"technical-doc/tech-stack/#6-deployment-devops-setup","title":"6. Deployment &amp; DevOps Setup","text":"Tool / Process Purpose Docker Containerizes both backend and frontend for consistent environments. Docker Compose Orchestrates all services (frontend, backend) together. Environment Variables (.env) Holds credentials for JWT, AWS, and database. Restart Policy Docker automatically restarts containers (<code>restart: always</code>)."},{"location":"technical-doc/tech-stack/#8-security-best-practices","title":"8. Security &amp; Best Practices","text":"Feature Implementation Authentication JWT stored in HTTP-only cookies. Password Protection bcrypt for salted password hashing. Validation Express Validator for input sanitization. Encryption HTTPS with AWS ACM certificates. Access Control Role-based access (Citizen, Authority, Admin). <p>Security Measures in AWS RDS: - Encryption at rest using AWS KMS. - Connection limited to private subnet within VPC. - Parameter groups configured for optimized performance.  </p>"},{"location":"technical-doc/tech-stack/#9-system-deployment-workflow","title":"9. System Deployment Workflow","text":""},{"location":"technical-doc/tech-stack/#step-by-step-deployment-flow","title":"Step-by-Step Deployment Flow","text":"<ol> <li>Code pushed to GitHub repository.  </li> <li>EC2 instance configured with Docker and Docker Compose.  </li> <li><code>.env</code> file includes RDS credentials (<code>DB_HOST</code>, <code>DB_USER</code>, <code>DB_PASS</code>, <code>DB_NAME</code>, <code>DB_PORT</code>).  </li> <li><code>docker-compose up -d</code> starts services:  </li> <li><code>backend</code> (Express API)  </li> <li><code>frontend</code> (React.js PWA)  </li> <li>Backend connects securely to RDS PostgreSQL instance.  </li> <li>Image uploads handled by S3 with public read access.  </li> <li>AWS ACM ensures HTTPS for all communication.  </li> </ol>"},{"location":"technical-doc/test/","title":"CivicTrack \u2013 Test Plan","text":""},{"location":"technical-doc/test/#1-scope","title":"1. Scope","text":""},{"location":"technical-doc/test/#scope","title":"Scope","text":"<ul> <li>User Registration (UC-01)  </li> <li>Login &amp; Authentication (UC-02)  </li> <li>Report Issue (UC-03)  </li> <li>Update Issue Status (UC-04)  </li> <li>Flag Issue (UC-05)  </li> <li>Review Flagged Issues (UC-06)  </li> <li>Manage Users (UC-07)  </li> <li>Change Password (UC-08)  </li> <li>Image upload to AWS S3  </li> <li>API testing (Postman)  </li> <li>Jest Unit + Integration testing  </li> </ul>"},{"location":"technical-doc/test/#2-test-approach","title":"2. Test Approach","text":""},{"location":"technical-doc/test/#a-manual-testing","title":"A) Manual Testing","text":"<ul> <li>All user flows tested through UI  </li> <li>Validate redirects, form validations, permissions  </li> <li>Verify dashboards for Citizen, Authority, Admin  </li> </ul>"},{"location":"technical-doc/test/#b-api-testing-postman","title":"B) API Testing (Postman)","text":"<p>Check the following: - Status codes - Response structure - Cookie-based authentication - Authorization errors (403, 401)</p>"},{"location":"technical-doc/test/#c-jest-testing","title":"C) Jest Testing","text":"<ul> <li>Unit tests for controllers, services  </li> <li>Middleware tests (auth, role check)  </li> <li>S3 upload mocked  </li> <li>API integration tests using Supertest  </li> </ul>"},{"location":"technical-doc/test/#d-database-validation","title":"D) Database Validation","text":"<ul> <li>Verify FK relations  </li> <li>Check unique constraints  </li> <li>Indexes working properly (quick filtering)</li> </ul>"},{"location":"technical-doc/test/#3-features-to-be-tested","title":"3. Features to Be Tested","text":""},{"location":"technical-doc/test/#uc-01-register-user","title":"UC-01 Register User","text":"<ul> <li>Valid/invalid inputs  </li> <li>Duplicate email handling  </li> </ul>"},{"location":"technical-doc/test/#uc-02-login","title":"UC-02 Login","text":"<ul> <li>Correct credentials  </li> <li>Wrong password  </li> <li>JWT stored in HTTP-only cookie  </li> </ul>"},{"location":"technical-doc/test/#uc-03-report-issue","title":"UC-03 Report Issue","text":"<ul> <li>Submit issue with/without image  </li> <li>Upload image to S3  </li> <li>Issue stored with correct status  </li> </ul>"},{"location":"technical-doc/test/#uc-04-update-issue-status","title":"UC-04 Update Issue Status","text":"<ul> <li>Authority updates to \"in_progress\" / \"resolved\"  </li> <li>Unauthorized users blocked  </li> </ul>"},{"location":"technical-doc/test/#uc-05-flag-issue","title":"UC-05 Flag Issue","text":"<ul> <li>Single user can't flag twice  </li> <li>Auto-hide after threshold  </li> </ul>"},{"location":"technical-doc/test/#uc-06-review-flagged-issues","title":"UC-06 Review Flagged Issues","text":"<ul> <li>Admin hides/restores issue  </li> </ul>"},{"location":"technical-doc/test/#uc-07-manage-users","title":"UC-07 Manage Users","text":"<ul> <li>Assign/remove roles  </li> <li>Check role-based access  </li> </ul>"},{"location":"technical-doc/test/#uc-08-change-password","title":"UC-08 Change Password","text":"<ul> <li>Valid current password  </li> <li>Password hashing  </li> <li>Session reset  </li> </ul>"},{"location":"technical-doc/test/#4-entry-criteria","title":"4. Entry Criteria","text":"<ul> <li>Backend API up and running  </li> <li>Database configured  </li> <li>S3 bucket working  </li> <li>Postman collection ready  </li> </ul>"},{"location":"technical-doc/test/#5-exit-criteria","title":"5. Exit Criteria","text":"<ul> <li>All test cases executed  </li> <li>No critical bugs open  </li> <li>Core flows functioning correctly  </li> </ul>"},{"location":"technical-doc/test/#6-risks-mitigation","title":"6. Risks &amp; Mitigation","text":"Risk Mitigation Incorrect AWS permissions Test IAM policy early Deployment issues Use staging environment Unclear requirements Regular communication"},{"location":"technical-doc/test/#7-deliverables","title":"7. Deliverables","text":"<ul> <li>Test Plan  </li> <li>Test Cases  </li> <li>Test Execution Report  </li> <li>Bug Report  </li> <li>Final Testing Summary  </li> </ul>"}]}